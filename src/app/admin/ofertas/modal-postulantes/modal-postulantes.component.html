<h2 mat-dialog-title class="titulo-modal">
  <mat-icon>groups</mat-icon>
  <span>Postulantes</span>
</h2>

<div mat-dialog-content class="postulantes-table-container">
  <table mat-table [dataSource]="postulaciones" class="mat-elevation-z8 tabla-postulantes">

    <!-- C贸digo -->
    <ng-container matColumnDef="codigo">
      <th mat-header-cell *matHeaderCellDef> C贸digo </th>
      <td mat-cell *matCellDef="let p"> {{ p.codigo || ('P' + p.idPersona) }} </td>
    </ng-container>

    <!-- Nombre -->
    <ng-container matColumnDef="nombre">
      <th mat-header-cell *matHeaderCellDef> Estudiante </th>
      <td mat-cell *matCellDef="let p"> {{ p.nombre || 'Estudiante ' + p.idPersona }} </td>
    </ng-container>

    <!-- Estado -->
    <ng-container matColumnDef="estado">
      <th mat-header-cell *matHeaderCellDef> Estado </th>
      <td mat-cell *matCellDef="let p">
        <span class="estado" [ngClass]="p.estado.toLowerCase()">{{ p.estado }}</span>
      </td>
    </ng-container>

    <!-- Acciones -->
    <ng-container matColumnDef="acciones">
      <th mat-header-cell *matHeaderCellDef> Acciones </th>
      <td mat-cell *matCellDef="let p">
        <ng-container *ngIf="p.estado === 'PENDIENTE'">
          <button mat-icon-button color="primary" matTooltip="Enviar a revisi贸n"
                  (click)="cambiarEstado(p.id, 'EN_REVISION')">
            <mat-icon>check</mat-icon>
          </button>

          <button mat-icon-button color="warn" matTooltip="Rechazar postulaci贸n"
                  (click)="cambiarEstado(p.id, 'RECHAZADA', 'No cumple requisitos')">
            <mat-icon>close</mat-icon>
          </button>
        </ng-container>

        <ng-container *ngIf="p.estado !== 'PENDIENTE'">
          <mat-icon color="disabled" matTooltip="Sin acciones">block</mat-icon>
        </ng-container>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="['codigo', 'nombre', 'estado', 'acciones']"></tr>
    <tr mat-row *matRowDef="let row; columns: ['codigo', 'nombre', 'estado', 'acciones'];"></tr>
  </table>
</div>

<div mat-dialog-actions align="end">
  <button mat-icon-button (click)="cerrar()" matTooltip="Cerrar">
    <mat-icon>close</mat-icon>
  </button>
</div>
