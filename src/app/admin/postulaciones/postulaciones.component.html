<table>
  <thead>
  <tr>
    <th>Estudiante</th>
    <th>Oferta</th>
    <th>Estado</th>
    <th>Acciones Estado</th>
    <th>Documento Subido</th>
    <th>Acciones Documento</th>
  </tr>
  </thead>
  <tbody>
  <tr *ngFor="let p of postulaciones">
    <td>{{ p.nombreEstudiante || 'Desconocido' }}</td>
    <td>{{ p.oferta?.titulo }}</td>
    <td>{{ p.estado }}</td>

    <!-- Acciones Estado -->
    <td>
      <button *ngIf="p.estado === 'PENDIENTE'" (click)="cambiarEstado(p.id, 'EN_REVISION')">âœ… Revisar</button>
      <button *ngIf="p.estado === 'PENDIENTE'" (click)="cambiarEstado(p.id, 'RECHAZADA')">âŒ Rechazar</button>
    </td>

    <!-- Documento Subido -->
    <td>
      <ng-container *ngIf="documentos[p.id]; else noDoc">
        <button (click)="verDocumento(documentos[p.id].rutaArchivo)">ğŸ“„ Ver</button>
      </ng-container>
      <ng-template #noDoc>â€”</ng-template>
    </td>

    <!-- Acciones Documento -->
    <td>
      <ng-container *ngIf="documentos[p.id] as doc">
        <ng-container *ngIf="doc.estado === 'PENDIENTE' || doc.estado === 'RECHAZADO'">
          <button (click)="cambiarEstadoDocumento(p.id, 'ACEPTADO')">âœ… Aceptar</button>
          <button (click)="cambiarEstadoDocumento(p.id, 'RECHAZADO')">âŒ Rechazar</button>
        </ng-container>
      </ng-container>
      <ng-container *ngIf="!documentos[p.id]">â€”</ng-container>
    </td>
  </tr>
  </tbody>
</table>
